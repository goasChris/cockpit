import{bk as $,d as B,aO as I,C as o,bl as P,bm as z,t as O,r as V,o as R,bd as T,bn as H,b1 as M,w as S,g as _,p as c,q as v,s as r,b8 as U,v as s,x as d,V as j,y as A,z as f,A as E,bo as h,b7 as q,B as w,$ as x,F as D,G as L,H as Y,I as G,_ as K}from"./index.8eaa03f2.js";const W=$("v-banner-text"),y=u=>(Y("data-v-23e7e49d"),u=u(),G(),u),J={ref:"videoWidget",class:"video-widget"},Q={key:0,class:"no-video-alert"},X=y(()=>r("span",null,"No video stream selected.",-1)),Z=[X],ee={key:1,class:"no-video-alert"},te=y(()=>r("p",null,"The selected stream is not available.",-1)),oe=y(()=>r("p",null,"Please check its source or select another stream.",-1)),ae=[te,oe],le={key:2,class:"no-video-alert"},se=y(()=>r("span",null,"Loading stream...",-1)),ie=[se],ne={class:"flex-wrap justify-center d-flex ga-5"},de=B({__name:"VideoPlayer",props:{widget:{}},setup(u){I(a=>({"483a4ab8":o(e).options.videoFitStyle,"4ef0bb48":k.value}));const g=P(),{namesAvailableStreams:m}=z(g),e=O(u).widget,i=V(),p=V(),n=V();R(()=>{const a={videoFitStyle:"cover",flipHorizontally:!1,flipVertically:!1,rotationAngle:0,streamName:void 0};e.value.options=Object.assign({},a,e.value.options),i.value=e.value.options.streamName});const N=setInterval(()=>{if(e.value.options.streamName===void 0&&!m.value.isEmpty()&&(e.value.options.streamName=m.value[0],i.value=e.value.options.streamName,m.value.length>1)){const t=`You have multiple streams available, so we chose one randomly to start with.
        If you want to change it, please open the widget configuration on the edit-menu.`;T.fire({title:"Multiple streams detected",text:t,icon:"info",confirmButtonText:"OK"})}const a=g.getMediaStream(e.value.options.streamName);H(a,n.value)||(n.value=a)},1e3);M(()=>clearInterval(N)),S(i,()=>{e.value.options.streamName=i.value,n.value=void 0}),S(n,()=>{!p.value||!n.value||(p.value.srcObject=n.value,p.value.play().then(()=>console.log("[VideoPlayer] Stream is playing")).catch(a=>{const t=`Failed to play stream. Reason: ${a}`;console.error(`[VideoPlayer] ${t}`)}))});const b=a=>{e.value.options.rotationAngle+=a},C=_(()=>`scale(${e.value.options.flipHorizontally?-1:1}, ${e.value.options.flipVertically?-1:1})`),F=_(()=>{var a;return`rotate(${(a=e.value.options.rotationAngle)!=null?a:0}deg)`}),k=_(()=>`${C.value} ${F.value}`);return(a,t)=>(c(),v(L,null,[r("div",J,[i.value===void 0?(c(),v("div",Q,Z)):o(m).includes(i.value)?n.value===void 0?(c(),v("div",le,ie)):U("",!0):(c(),v("div",ee,ae)),r("video",{ref_key:"videoElement",ref:p,muted:"",autoplay:"",playsinline:"",disablePictureInPicture:""}," Your browser does not support the video tag. ",512)],512),s(D,{modelValue:o(e).managerVars.configMenuOpen,"onUpdate:modelValue":t[6]||(t[6]=l=>o(e).managerVars.configMenuOpen=l),width:"auto"},{default:d(()=>[s(j,{class:"pa-2"},{default:d(()=>[s(A,null,{default:d(()=>[f("Video widget config")]),_:1}),s(E,null,{default:d(()=>[s(h,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=l=>i.value=l),label:"Stream name",class:"my-3",items:o(m),"item-title":"name",density:"compact",variant:"outlined","no-data-text":"No streams available.","hide-details":"","return-object":""},null,8,["modelValue","items"]),s(h,{modelValue:o(e).options.videoFitStyle,"onUpdate:modelValue":t[1]||(t[1]=l=>o(e).options.videoFitStyle=l),label:"Fit style",class:"my-3",items:["cover","fill","contain"],"item-title":"style",density:"compact",variant:"outlined","no-data-text":"No streams available.","hide-details":"","return-object":""},null,8,["modelValue"]),s(W,null,{default:d(()=>[f('Saved stream name: "'+q(o(e).options.streamName)+'"',1)]),_:1}),s(w,{modelValue:o(e).options.flipHorizontally,"onUpdate:modelValue":t[2]||(t[2]=l=>o(e).options.flipHorizontally=l),class:"my-1",label:"Flip horizontally",color:o(e).options.flipHorizontally?"rgb(0, 20, 80)":void 0,"hide-details":""},null,8,["modelValue","color"]),s(w,{modelValue:o(e).options.flipVertically,"onUpdate:modelValue":t[3]||(t[3]=l=>o(e).options.flipVertically=l),class:"my-1",label:"Flip vertically",color:o(e).options.flipVertically?"rgb(0, 20, 80)":void 0,"hide-details":""},null,8,["modelValue","color"]),r("div",ne,[s(x,{"prepend-icon":"mdi-file-rotate-left",variant:"outlined",onClick:t[4]||(t[4]=l=>b(-90))},{default:d(()=>[f(" Rotate Left")]),_:1}),s(x,{"prepend-icon":"mdi-file-rotate-right",variant:"outlined",onClick:t[5]||(t[5]=l=>b(90))},{default:d(()=>[f(" Rotate Right")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});const me=K(de,[["__scopeId","data-v-23e7e49d"]]);export{me as default};
